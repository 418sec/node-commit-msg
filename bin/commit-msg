#!/usr/bin/env node

// clns/node-commit-msg
// http://git-scm.com/docs/githooks#_commit_msg

var CommitMessage = require('..');

var file = process.argv[2]; // usually '.git/COMMIT_EDITMSG'
var message = CommitMessage.parseFromFile(file);

if (message.hasErrors() || message.hasWarnings()) {
    console.log(message.formattedMessages);
}
if (message.hasErrors()) {
    console.error('Commit aborted due to invalid commit message (see above).');
    // https://nodejs.org/api/process.html#process_exit_codes
    process.exit(9); // Invalid Argument
}
